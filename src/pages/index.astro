---
// src/pages/index.astro
import { client } from "../lib/microcms";

// microCMSから「categories」というエンドポイントのデータを取得
const response_cat = await client.get({ 
  endpoint: "categories", // あなたがmicroCMSで作ったエンドポイント名に変更
  queries: { fields: ["id", "name"] } 
});
// microCMSから「info」というエンドポイントのデータを取得
const response = await client.get({ 
  endpoint: "info", // あなたがmicroCMSで作ったエンドポイント名に変更
  queries: { fields: ["id", "title"] } 
});

import '../styles/style.css';

---

<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
</head>
  <body>
    <div class="p-flyer">
      <div class="p-flyer__inner inner">

      <div class="p-info__cats">
        <h2>カテゴリ一覧</h2>
        <div>
          <ul class="p-info__cats-flex c-flex">
            {
              response_cat.contents.map((post: any) => (
                <li>
                  <a href={`./cat/${post.id}`}>{post.name}</a>
                </li>
              ))
            }
          </ul>
        </div>
      </div>
    
        <h1>記事一覧</h1>
        <ul class="p-flyer__flex">
          {
            response.contents.map((post: any) => (
              <li class="p-flyer__box">
                <a href={`./blog/${post.id}`}>{post.title}</a>
              </li>
            ))
          }
        </ul>

        <h1>牛一覧</h1>
        <div class="p-flyer__flex">
          <ul id="article-list"></ul>
        </div>
        <a href="./store">store</a>
      </div>
    </div>
  </body>
  <script>
    const data = './cow.json';
    const listContainer = document.getElementById('article-list');

    const htmlContent = data.map(item => `
      <li>
        <strong>ID:</strong> ${item.id2} | 
        <strong>LOT:</strong> ${item.lot} | 
        <strong>品種:</strong> ${item.breed} | 
        <strong>性別:</strong> ${item.gender}
      </li>
    `).join('');

    listContainer.innerHTML = htmlContent;
  </script>
</html>